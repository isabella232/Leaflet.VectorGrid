"use strict";function __$strToBlobUri(t,e,i){try{return window.URL.createObjectURL(new Blob([Uint8Array.from(t.split("").map(function(t){return t.charCodeAt(0)}))],{type:e}))}catch(r){return"data:"+e+(i?";base64,":",")+t}}function Pbf(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}function readVarintRemainder(t,e,i){var r,n,o=i.buf;if(n=o[i.pos++],r=(112&n)>>4,n<128)return toNum(t,r,e);if(n=o[i.pos++],r|=(127&n)<<3,n<128)return toNum(t,r,e);if(n=o[i.pos++],r|=(127&n)<<10,n<128)return toNum(t,r,e);if(n=o[i.pos++],r|=(127&n)<<17,n<128)return toNum(t,r,e);if(n=o[i.pos++],r|=(127&n)<<24,n<128)return toNum(t,r,e);if(n=o[i.pos++],r|=(1&n)<<31,n<128)return toNum(t,r,e);throw new Error("Expected varint not more than 10 bytes")}function readPackedEnd(t){return t.type===Pbf.Bytes?t.readVarint()+t.pos:t.pos+1}function toNum(t,e,i){return i?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}function writeBigVarint(t,e){var i,r;if(t>=0?(i=t%4294967296|0,r=t/4294967296|0):(i=~(-t%4294967296),r=~(-t/4294967296),4294967295^i?i=i+1|0:(i=0,r=r+1|0)),t>=0x10000000000000000||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),writeBigVarintLow(i,r,e),writeBigVarintHigh(r,e)}function writeBigVarintLow(t,e,i){i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos]=127&t}function writeBigVarintHigh(t,e){var i=(7&t)<<4;e.buf[e.pos++]|=i|((t>>>=3)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t)))))}function makeRoomForExtraLength(t,e,i){var r=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.ceil(Math.log(e)/(7*Math.LN2));i.realloc(r);for(var n=i.pos-1;n>=t;n--)i.buf[n+r]=i.buf[n]}function writePackedVarint(t,e){for(var i=0;i<t.length;i++)e.writeVarint(t[i])}function writePackedSVarint(t,e){for(var i=0;i<t.length;i++)e.writeSVarint(t[i])}function writePackedFloat(t,e){for(var i=0;i<t.length;i++)e.writeFloat(t[i])}function writePackedDouble(t,e){for(var i=0;i<t.length;i++)e.writeDouble(t[i])}function writePackedBoolean(t,e){for(var i=0;i<t.length;i++)e.writeBoolean(t[i])}function writePackedFixed32(t,e){for(var i=0;i<t.length;i++)e.writeFixed32(t[i])}function writePackedSFixed32(t,e){for(var i=0;i<t.length;i++)e.writeSFixed32(t[i])}function writePackedFixed64(t,e){for(var i=0;i<t.length;i++)e.writeFixed64(t[i])}function writePackedSFixed64(t,e){for(var i=0;i<t.length;i++)e.writeSFixed64(t[i])}function readUInt32(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function writeInt32(t,e,i){t[i]=e,t[i+1]=e>>>8,t[i+2]=e>>>16,t[i+3]=e>>>24}function readInt32(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}function readUtf8(t,e,i){for(var r="",n=e;n<i;){var o=t[n],a=null,s=o>239?4:o>223?3:o>191?2:1;if(n+s>i)break;var u,h,c;1===s?o<128&&(a=o):2===s?(u=t[n+1],128===(192&u)&&(a=(31&o)<<6|63&u,a<=127&&(a=null))):3===s?(u=t[n+1],h=t[n+2],128===(192&u)&&128===(192&h)&&(a=(15&o)<<12|(63&u)<<6|63&h,(a<=2047||a>=55296&&a<=57343)&&(a=null))):4===s&&(u=t[n+1],h=t[n+2],c=t[n+3],128===(192&u)&&128===(192&h)&&128===(192&c)&&(a=(15&o)<<18|(63&u)<<12|(63&h)<<6|63&c,(a<=65535||a>=1114112)&&(a=null))),null===a?(a=65533,s=1):a>65535&&(a-=65536,r+=String.fromCharCode(a>>>10&1023|55296),a=56320|1023&a),r+=String.fromCharCode(a),n+=s}return r}function writeUtf8(t,e,i){for(var r,n,o=0;o<e.length;o++){if(r=e.charCodeAt(o),r>55295&&r<57344){if(!n){r>56319||o+1===e.length?(t[i++]=239,t[i++]=191,t[i++]=189):n=r;continue}if(r<56320){t[i++]=239,t[i++]=191,t[i++]=189,n=r;continue}r=n-55296<<10|r-56320|65536,n=null}else n&&(t[i++]=239,t[i++]=191,t[i++]=189,n=null);r<128?t[i++]=r:(r<2048?t[i++]=r>>6|192:(r<65536?t[i++]=r>>12|224:(t[i++]=r>>18|240,t[i++]=r>>12&63|128),t[i++]=r>>6&63|128),t[i++]=63&r|128)}return i}function Point$1(t,e){this.x=t,this.y=e}function VectorTileFeature$2(t,e,i,r,n){this.properties={},this.extent=i,this.type=0,this._pbf=t,this._geometry=-1,this._keys=r,this._values=n,t.readFields(readFeature,this,e)}function readFeature(t,e,i){1==t?e.id=i.readVarint():2==t?readTag(i,e):3==t?e.type=i.readVarint():4==t&&(e._geometry=i.pos)}function readTag(t,e){for(var i=t.readVarint()+t.pos;t.pos<i;){var r=e._keys[t.readVarint()],n=e._values[t.readVarint()];e.properties[r]=n}}function classifyRings(t){var e=t.length;if(e<=1)return[t];for(var i,r,n=[],o=0;o<e;o++){var a=signedArea(t[o]);0!==a&&(void 0===r&&(r=a<0),r===a<0?(i&&n.push(i),i=[t[o]]):i.push(t[o]))}return i&&n.push(i),n}function signedArea(t){for(var e,i,r=0,n=0,o=t.length,a=o-1;n<o;a=n++)e=t[n],i=t[a],r+=(i.x-e.x)*(e.y+i.y);return r}function VectorTileLayer$2(t,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=t,this._keys=[],this._values=[],this._features=[],t.readFields(readLayer,this,e),this.length=this._features.length}function readLayer(t,e,i){15===t?e.version=i.readVarint():1===t?e.name=i.readString():5===t?e.extent=i.readVarint():2===t?e._features.push(i.pos):3===t?e._keys.push(i.readString()):4===t&&e._values.push(readValueMessage(i))}function readValueMessage(t){for(var e=null,i=t.readVarint()+t.pos;t.pos<i;){var r=t.readVarint()>>3;e=1===r?t.readString():2===r?t.readFloat():3===r?t.readDouble():4===r?t.readVarint64():5===r?t.readVarint():6===r?t.readSVarint():7===r?t.readBoolean():null}return e}function VectorTile$1(t,e){this.layers=t.readFields(readTile,{},e)}function readTile(t,e,i){if(3===t){var r=new VectorTileLayer$1(i,i.readVarint()+i.pos);r.length&&(e[r.name]=r)}}function simplify$1(t,e){var i,r,n,o,a=e*e,s=t.length,u=0,h=s-1,c=[];for(t[u][2]=1,t[h][2]=1;h;){for(r=0,i=u+1;i<h;i++)n=getSqSegDist(t[i],t[u],t[h]),n>r&&(o=i,r=n);r>a?(t[o][2]=r,c.push(u),c.push(o),u=o):(h=c.pop(),u=c.pop())}}function getSqSegDist(t,e,i){var r=e[0],n=e[1],o=i[0],a=i[1],s=t[0],u=t[1],h=o-r,c=a-n;if(0!==h||0!==c){var l=((s-r)*h+(u-n)*c)/(h*h+c*c);l>1?(r=o,n=a):l>0&&(r+=h*l,n+=c*l)}return h=s-r,c=u-n,h*h+c*c}function createFeature$1(t,e,i,r){var n={id:r||null,type:e,geometry:i,tags:t||null,min:[1/0,1/0],max:[-(1/0),-(1/0)]};return calcBBox(n),n}function calcBBox(t){var e=t.geometry,i=t.min,r=t.max;if(1===t.type)calcRingBBox(i,r,e);else for(var n=0;n<e.length;n++)calcRingBBox(i,r,e[n]);return t}function calcRingBBox(t,e,i){for(var r,n=0;n<i.length;n++)r=i[n],t[0]=Math.min(r[0],t[0]),e[0]=Math.max(r[0],e[0]),t[1]=Math.min(r[1],t[1]),e[1]=Math.max(r[1],e[1])}function convert$1(t,e){var i=[];if("FeatureCollection"===t.type)for(var r=0;r<t.features.length;r++)convertFeature(i,t.features[r],e);else"Feature"===t.type?convertFeature(i,t,e):convertFeature(i,{geometry:t},e);return i}function convertFeature(t,e,i){if(null!==e.geometry){var r,n,o,a,s=e.geometry,u=s.type,h=s.coordinates,c=e.properties,l=e.id;if("Point"===u)t.push(createFeature(c,1,[projectPoint(h)],l));else if("MultiPoint"===u)t.push(createFeature(c,1,project(h),l));else if("LineString"===u)t.push(createFeature(c,2,[project(h,i)],l));else if("MultiLineString"===u||"Polygon"===u){for(o=[],r=0;r<h.length;r++)a=project(h[r],i),"Polygon"===u&&(a.outer=0===r),o.push(a);t.push(createFeature(c,"Polygon"===u?3:2,o,l))}else if("MultiPolygon"===u){for(o=[],r=0;r<h.length;r++)for(n=0;n<h[r].length;n++)a=project(h[r][n],i),a.outer=0===n,o.push(a);t.push(createFeature(c,3,o,l))}else{if("GeometryCollection"!==u)throw new Error("Input data is not a valid GeoJSON object.");for(r=0;r<s.geometries.length;r++)convertFeature(t,{geometry:s.geometries[r],properties:c},i)}}}function project(t,e){for(var i=[],r=0;r<t.length;r++)i.push(projectPoint(t[r]));return e&&(simplify(i,e),calcSize(i)),i}function projectPoint(t){var e=Math.sin(t[1]*Math.PI/180),i=t[0]/360+.5,r=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return r=r<0?0:r>1?1:r,[i,r,0]}function calcSize(t){for(var e,i,r=0,n=0,o=0;o<t.length-1;o++)e=i||t[o],i=t[o+1],r+=e[0]*i[1]-i[0]*e[1],n+=Math.abs(i[0]-e[0])+Math.abs(i[1]-e[1]);t.area=Math.abs(r/2),t.dist=n}function transformTile(t,e){if(t.transformed)return t;var i,r,n,o=t.z2,a=t.x,s=t.y;for(i=0;i<t.features.length;i++){var u=t.features[i],h=u.geometry,c=u.type;if(1===c)for(r=0;r<h.length;r++)h[r]=transformPoint(h[r],e,o,a,s);else for(r=0;r<h.length;r++){var l=h[r];for(n=0;n<l.length;n++)l[n]=transformPoint(l[n],e,o,a,s)}}return t.transformed=!0,t}function transformPoint(t,e,i,r,n){var o=Math.round(e*(t[0]*i-r)),a=Math.round(e*(t[1]*i-n));return[o,a]}function clip$1(t,e,i,r,n,o,a,s){if(i/=e,r/=e,a>=i&&s<=r)return t;if(a>r||s<i)return null;for(var u=[],h=0;h<t.length;h++){var c,l,f=t[h],d=f.geometry,p=f.type;if(c=f.min[n],l=f.max[n],c>=i&&l<=r)u.push(f);else if(!(c>r||l<i)){var y=1===p?clipPoints(d,i,r,n):clipGeometry(d,i,r,n,o,3===p);y.length&&u.push(createFeature$2(f.tags,p,y,f.id))}}return u.length?u:null}function clipPoints(t,e,i,r){for(var n=[],o=0;o<t.length;o++){var a=t[o],s=a[r];s>=e&&s<=i&&n.push(a)}return n}function clipGeometry(t,e,i,r,n,o){for(var a=[],s=0;s<t.length;s++){var u,h,c,l=0,f=0,d=null,p=t[s],y=p.area,v=p.dist,g=p.outer,m=p.length,_=[];for(h=0;h<m-1;h++)u=d||p[h],d=p[h+1],l=f||u[r],f=d[r],l<e?f>i?(_.push(n(u,d,e),n(u,d,i)),o||(_=newSlice(a,_,y,v,g))):f>=e&&_.push(n(u,d,e)):l>i?f<e?(_.push(n(u,d,i),n(u,d,e)),o||(_=newSlice(a,_,y,v,g))):f<=i&&_.push(n(u,d,i)):(_.push(u),f<e?(_.push(n(u,d,e)),o||(_=newSlice(a,_,y,v,g))):f>i&&(_.push(n(u,d,i)),o||(_=newSlice(a,_,y,v,g))));u=p[m-1],l=u[r],l>=e&&l<=i&&_.push(u),c=_[_.length-1],o&&c&&(_[0][0]!==c[0]||_[0][1]!==c[1])&&_.push(_[0]),newSlice(a,_,y,v,g)}return a}function newSlice(t,e,i,r,n){return e.length&&(e.area=i,e.dist=r,void 0!==n&&(e.outer=n),t.push(e)),[]}function wrap$1(t,e,i){var r=t,n=clip$2(t,1,-1-e,e,0,i,-1,2),o=clip$2(t,1,1-e,2+e,0,i,-1,2);return(n||o)&&(r=clip$2(t,1,-e,1+e,0,i,-1,2)||[],n&&(r=shiftFeatureCoords(n,1).concat(r)),o&&(r=r.concat(shiftFeatureCoords(o,-1)))),r}function shiftFeatureCoords(t,e){for(var i=[],r=0;r<t.length;r++){var n,o=t[r],a=o.type;if(1===a)n=shiftCoords(o.geometry,e);else{n=[];for(var s=0;s<o.geometry.length;s++)n.push(shiftCoords(o.geometry[s],e))}i.push(createFeature$3(o.tags,a,n,o.id))}return i}function shiftCoords(t,e){var i=[];i.area=t.area,i.dist=t.dist;for(var r=0;r<t.length;r++)i.push([t[r][0]+e,t[r][1],t[r][2]]);return i}function createTile$1(t,e,i,r,n,o){for(var a={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:i,y:r,z2:e,transformed:!1,min:[2,1],max:[-1,0]},s=0;s<t.length;s++){a.numFeatures++,addFeature(a,t[s],n,o);var u=t[s].min,h=t[s].max;u[0]<a.min[0]&&(a.min[0]=u[0]),u[1]<a.min[1]&&(a.min[1]=u[1]),h[0]>a.max[0]&&(a.max[0]=h[0]),h[1]>a.max[1]&&(a.max[1]=h[1])}return a}function addFeature(t,e,i,r){var n,o,a,s,u=e.geometry,h=e.type,c=[],l=i*i;if(1===h)for(n=0;n<u.length;n++)c.push(u[n]),t.numPoints++,t.numSimplified++;else for(n=0;n<u.length;n++)if(a=u[n],r||!(2===h&&a.dist<i||3===h&&a.area<l)){var f=[];for(o=0;o<a.length;o++)s=a[o],(r||s[2]>l)&&(f.push(s),t.numSimplified++),t.numPoints++;3===h&&rewind(f,a.outer),c.push(f)}else t.numPoints+=a.length;if(c.length){var d={geometry:c,type:h,tags:e.tags||null};null!==e.id&&(d.id=e.id),t.features.push(d)}}function rewind(t,e){var i=signedArea$1(t);i<0===e&&t.reverse()}function signedArea$1(t){for(var e,i,r=0,n=0,o=t.length,a=o-1;n<o;a=n++)e=t[n],i=t[a],r+=(i[0]-e[0])*(e[1]+i[1]);return r}function geojsonvt(t,e){return new GeoJSONVT(t,e)}function GeoJSONVT(t,e){e=this.options=extend(Object.create(this.options),e);var i=e.debug;i&&console.time("preprocess data");var r=1<<e.maxZoom,n=convert(t,e.tolerance/(r*e.extent));this.tiles={},this.tileCoords=[],i&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",e.indexMaxZoom,e.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),n=wrap(n,e.buffer/e.extent,intersectX),n.length&&this.splitTile(n,0,0,0),i&&(n.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function toID(t,e,i){return 32*((1<<t)*i+e)+t}function intersectX(t,e,i){return[i,(i-t[0])*(e[1]-t[1])/(e[0]-t[0])+t[1],1]}function intersectY(t,e,i){return[(i-t[1])*(e[0]-t[0])/(e[1]-t[1])+t[0],i,1]}function extend(t,e){for(var i in e)t[i]=e[i];return t}function isClippedSquare(t,e,i){var r=t.source;if(1!==r.length)return!1;var n=r[0];if(3!==n.type||n.geometry.length>1)return!1;var o=n.geometry[0].length;if(5!==o)return!1;for(var a=0;a<o;a++){var s=transform.point(n.geometry[0][a],e,t.z2,t.x,t.y);if(s[0]!==-i&&s[0]!==e+i||s[1]!==-i&&s[1]!==e+i)return!1}return!0}function feature$3(t,e){var i=e.id,r=e.bbox,n=null==e.properties?{}:e.properties,o=object(t,e);return null==i&&null==r?{type:"Feature",properties:n,geometry:o}:null==r?{type:"Feature",id:i,properties:n,geometry:o}:{type:"Feature",id:i,bbox:r,properties:n,geometry:o}}function object(t,e){function i(t,e){e.length&&e.pop();for(var i=h[t<0?~t:t],r=0,n=i.length;r<n;++r)e.push(u(i[r].slice(),r));t<0&&reverse(e,n)}function r(t){return u(t.slice())}function n(t){for(var e=[],r=0,n=t.length;r<n;++r)i(t[r],e);return e.length<2&&e.push(e[0].slice()),e}function o(t){for(var e=n(t);e.length<4;)e.push(e[0].slice());return e}function a(t){return t.map(o)}function s(t){var e,i=t.type;switch(i){case"GeometryCollection":return{type:i,geometries:t.geometries.map(s)};case"Point":e=r(t.coordinates);break;case"MultiPoint":e=t.coordinates.map(r);break;case"LineString":e=n(t.arcs);break;case"MultiLineString":e=t.arcs.map(n);break;case"Polygon":e=a(t.arcs);break;case"MultiPolygon":e=t.arcs.map(a);break;default:return null}return{type:i,coordinates:e}}var u=transform$3(t),h=t.arcs;return s(e)}function extractArcs(t,e,i){function r(t){var e=t<0?~t:t;(c[e]||(c[e]=[])).push({i:t,g:u})}function n(t){t.forEach(r)}function o(t){t.forEach(n)}function a(t){t.forEach(o)}function s(t){switch(u=t,t.type){case"GeometryCollection":t.geometries.forEach(s);break;case"LineString":n(t.arcs);break;case"MultiLineString":case"Polygon":o(t.arcs);break;case"MultiPolygon":a(t.arcs)}}var u,h=[],c=[];return s(e),c.forEach(null==i?function(t){h.push(t[0].i)}:function(t){i(t[0].g,t[t.length-1].g)&&h.push(t[0].i)}),h}function planarRingArea(t){for(var e,i=-1,r=t.length,n=t[r-1],o=0;++i<r;)e=n,n=t[i],o+=e[0]*n[1]-e[1]*n[0];return Math.abs(o)}var read=function(t,e,i,r,n){var o,a,s=8*n-r-1,u=(1<<s)-1,h=u>>1,c=-7,l=i?n-1:0,f=i?-1:1,d=t[e+l];for(l+=f,o=d&(1<<-c)-1,d>>=-c,c+=s;c>0;o=256*o+t[e+l],l+=f,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=r;c>0;a=256*a+t[e+l],l+=f,c-=8);if(0===o)o=1-h;else{if(o===u)return a?NaN:(d?-1:1)*(1/0);a+=Math.pow(2,r),o-=h}return(d?-1:1)*a*Math.pow(2,o-r)},write=function(t,e,i,r,n,o){var a,s,u,h=8*o-n-1,c=(1<<h)-1,l=c>>1,f=23===n?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:o-1,p=r?1:-1,y=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=c):(a=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-a))<1&&(a--,u*=2),e+=a+l>=1?f/u:f*Math.pow(2,1-l),e*u>=2&&(a++,u/=2),a+l>=c?(s=0,a=c):a+l>=1?(s=(e*u-1)*Math.pow(2,n),a+=l):(s=e*Math.pow(2,l-1)*Math.pow(2,n),a=0));n>=8;t[i+d]=255&s,d+=p,s/=256,n-=8);for(a=a<<n|s,h+=n;h>0;t[i+d]=255&a,d+=p,a/=256,h-=8);t[i+d-p]|=128*y},index$1={read:read,write:write},index=Pbf,ieee754=index$1;Pbf.Varint=0,Pbf.Fixed64=1,Pbf.Bytes=2,Pbf.Fixed32=5;var SHIFT_LEFT_32=4294967296,SHIFT_RIGHT_32=1/SHIFT_LEFT_32;Pbf.prototype={destroy:function(){this.buf=null},readFields:function(t,e,i){var r=this;for(i=i||this.length;this.pos<i;){var n=r.readVarint(),o=n>>3,a=r.pos;r.type=7&n,t(o,e,r),r.pos===a&&r.skip(n)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=readUInt32(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=readInt32(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=readUInt32(this.buf,this.pos)+readUInt32(this.buf,this.pos+4)*SHIFT_LEFT_32;return this.pos+=8,t},readSFixed64:function(){var t=readUInt32(this.buf,this.pos)+readInt32(this.buf,this.pos+4)*SHIFT_LEFT_32;return this.pos+=8,t},readFloat:function(){var t=ieee754.read(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=ieee754.read(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e,i,r=this.buf;return i=r[this.pos++],e=127&i,i<128?e:(i=r[this.pos++],e|=(127&i)<<7,i<128?e:(i=r[this.pos++],e|=(127&i)<<14,i<128?e:(i=r[this.pos++],e|=(127&i)<<21,i<128?e:(i=r[this.pos],e|=(15&i)<<28,readVarintRemainder(e,t,this)))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2===1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=readUtf8(this.buf,this.pos,t);return this.pos=t,e},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){var i=this,r=readPackedEnd(this);for(t=t||[];this.pos<r;)t.push(i.readVarint(e));return t},readPackedSVarint:function(t){var e=this,i=readPackedEnd(this);for(t=t||[];this.pos<i;)t.push(e.readSVarint());return t},readPackedBoolean:function(t){var e=this,i=readPackedEnd(this);for(t=t||[];this.pos<i;)t.push(e.readBoolean());return t},readPackedFloat:function(t){var e=this,i=readPackedEnd(this);for(t=t||[];this.pos<i;)t.push(e.readFloat());return t},readPackedDouble:function(t){var e=this,i=readPackedEnd(this);for(t=t||[];this.pos<i;)t.push(e.readDouble());return t},readPackedFixed32:function(t){var e=this,i=readPackedEnd(this);for(t=t||[];this.pos<i;)t.push(e.readFixed32());return t},readPackedSFixed32:function(t){var e=this,i=readPackedEnd(this);for(t=t||[];this.pos<i;)t.push(e.readSFixed32());return t},readPackedFixed64:function(t){var e=this,i=readPackedEnd(this);for(t=t||[];this.pos<i;)t.push(e.readFixed64());return t},readPackedSFixed64:function(t){var e=this,i=readPackedEnd(this);for(t=t||[];this.pos<i;)t.push(e.readSFixed64());return t},skip:function(t){var e=7&t;if(e===Pbf.Varint)for(;this.buf[this.pos++]>127;);else if(e===Pbf.Bytes)this.pos=this.readVarint()+this.pos;else if(e===Pbf.Fixed32)this.pos+=4;else{if(e!==Pbf.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var i=new Uint8Array(e);i.set(this.buf),this.buf=i,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),writeInt32(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),writeInt32(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),writeInt32(this.buf,t&-1,this.pos),writeInt32(this.buf,Math.floor(t*SHIFT_RIGHT_32),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),writeInt32(this.buf,t&-1,this.pos),writeInt32(this.buf,Math.floor(t*SHIFT_RIGHT_32),this.pos+4),this.pos+=8},writeVarint:function(t){return t=+t||0,t>268435455||t<0?void writeBigVarint(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),void(t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127)))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=writeUtf8(this.buf,t,this.pos);var i=this.pos-e;i>=128&&makeRoomForExtraLength(e,i,this),this.pos=e-1,this.writeVarint(i),this.pos+=i},writeFloat:function(t){this.realloc(4),ieee754.write(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),ieee754.write(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=this,i=t.length;this.writeVarint(i),this.realloc(i);for(var r=0;r<i;r++)e.buf[e.pos++]=t[r]},writeRawMessage:function(t,e){this.pos++;var i=this.pos;t(e,this);var r=this.pos-i;r>=128&&makeRoomForExtraLength(i,r,this),this.pos=i-1,this.writeVarint(r),this.pos+=r},writeMessage:function(t,e,i){this.writeTag(t,Pbf.Bytes),this.writeRawMessage(e,i)},writePackedVarint:function(t,e){this.writeMessage(t,writePackedVarint,e)},writePackedSVarint:function(t,e){this.writeMessage(t,writePackedSVarint,e)},writePackedBoolean:function(t,e){this.writeMessage(t,writePackedBoolean,e)},writePackedFloat:function(t,e){this.writeMessage(t,writePackedFloat,e)},writePackedDouble:function(t,e){this.writeMessage(t,writePackedDouble,e)},writePackedFixed32:function(t,e){this.writeMessage(t,writePackedFixed32,e)},writePackedSFixed32:function(t,e){this.writeMessage(t,writePackedSFixed32,e)},writePackedFixed64:function(t,e){this.writeMessage(t,writePackedFixed64,e)},writePackedSFixed64:function(t,e){this.writeMessage(t,writePackedSFixed64,e)},writeBytesField:function(t,e){this.writeTag(t,Pbf.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,Pbf.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,Pbf.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,Pbf.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,Pbf.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,Pbf.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,Pbf.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,Pbf.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,Pbf.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,Pbf.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}};var index$5=Point$1;Point$1.prototype={clone:function(){return new Point$1(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var e=t.x-this.x,i=t.y-this.y;return e*e+i*i},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult:function(t){var e=t[0]*this.x+t[1]*this.y,i=t[2]*this.x+t[3]*this.y;return this.x=e,this.y=i,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var e=Math.cos(t),i=Math.sin(t),r=e*this.x-i*this.y,n=i*this.x+e*this.y;return this.x=r,this.y=n,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},Point$1.convert=function(t){return t instanceof Point$1?t:Array.isArray(t)?new Point$1(t[0],t[1]):t};var Point=index$5,vectortilefeature=VectorTileFeature$2;VectorTileFeature$2.types=["Unknown","Point","LineString","Polygon"],VectorTileFeature$2.prototype.loadGeometry=function(){var t=this._pbf;t.pos=this._geometry;for(var e,i=t.readVarint()+t.pos,r=1,n=0,o=0,a=0,s=[];t.pos<i;){if(!n){var u=t.readVarint();r=7&u,n=u>>3}if(n--,1===r||2===r)o+=t.readSVarint(),a+=t.readSVarint(),1===r&&(e&&s.push(e),e=[]),e.push(new Point(o,a));else{if(7!==r)throw new Error("unknown command "+r);e&&e.push(e[0].clone())}}return e&&s.push(e),s},VectorTileFeature$2.prototype.bbox=function(){var t=this._pbf;t.pos=this._geometry;for(var e=t.readVarint()+t.pos,i=1,r=0,n=0,o=0,a=1/0,s=-(1/0),u=1/0,h=-(1/0);t.pos<e;){if(!r){var c=t.readVarint();i=7&c,r=c>>3}if(r--,1===i||2===i)n+=t.readSVarint(),o+=t.readSVarint(),n<a&&(a=n),n>s&&(s=n),o<u&&(u=o),o>h&&(h=o);else if(7!==i)throw new Error("unknown command "+i)}return[a,u,s,h]},VectorTileFeature$2.prototype.toGeoJSON=function(t,e,i){function r(t){for(var e=0;e<t.length;e++){var i=t[e],r=180-360*(i.y+u)/a;t[e]=[360*(i.x+s)/a-180,360/Math.PI*Math.atan(Math.exp(r*Math.PI/180))-90]}}var n,o,a=this.extent*Math.pow(2,i),s=this.extent*t,u=this.extent*e,h=this.loadGeometry(),c=VectorTileFeature$2.types[this.type];switch(this.type){case 1:var l=[];for(n=0;n<h.length;n++)l[n]=h[n][0];h=l,r(h);break;case 2:for(n=0;n<h.length;n++)r(h[n]);break;case 3:for(h=classifyRings(h),n=0;n<h.length;n++)for(o=0;o<h[n].length;o++)r(h[n][o])}1===h.length?h=h[0]:c="Multi"+c;var f={type:"Feature",geometry:{type:c,coordinates:h},properties:this.properties};return"id"in this&&(f.id=this.id),f};var VectorTileFeature$1=vectortilefeature,vectortilelayer=VectorTileLayer$2;VectorTileLayer$2.prototype.feature=function(t){if(t<0||t>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[t];var e=this._pbf.readVarint()+this._pbf.pos;return new VectorTileFeature$1(this._pbf,e,this.extent,this._keys,this._values)};var VectorTileLayer$1=vectortilelayer,vectortile=VectorTile$1,VectorTile=vectortile;L.SVG.Tile=L.SVG.extend({initialize:function(t,e,i){L.SVG.prototype.initialize.call(this,i),this._tileCoord=t,this._size=e,this._initContainer(),this._container.setAttribute("width",this._size.x),this._container.setAttribute("height",this._size.y),this._container.setAttribute("viewBox",[0,0,this._size.x,this._size.y].join(" ")),i.interactive&&(this._container.style.pointerEvents="auto"),this._layers={}},getCoord:function(){return this._tileCoord},getContainer:function(){return this._container},onAdd:L.Util.falseFn,addTo:function(t){var e=this;if(this._map=t,this.options.interactive)for(var i in this._layers){var r=e._layers[i];e._map._targets[L.stamp(r._path)]=r}},_initContainer:function(){L.SVG.prototype._initContainer.call(this);L.SVG.create("rect")},_addPath:function(t){this._rootGroup.appendChild(t._path),this._layers[L.stamp(t)]=t},_updateIcon:function(t){var e=t._path=L.SVG.create("image"),i=t.options.icon,r=i.options,n=L.point(r.iconSize),o=r.iconAnchor||n&&n.divideBy(2,!0),a=t._point.subtract(o);e.setAttribute("x",a.x),e.setAttribute("y",a.y),e.setAttribute("width",n.x+"px"),e.setAttribute("height",n.y+"px"),e.setAttribute("href",r.iconUrl)}}),L.svg.tile=function(t,e,i){return new L.SVG.Tile(t,e,i)},L.VectorGrid=L.GridLayer.extend({options:{rendererFactory:L.svg.tile,vectorTileLayerStyles:{},interactive:!1},initialize:function(t){L.setOptions(this,t),L.GridLayer.prototype.initialize.apply(this,arguments),this.options.getFeatureId&&(this._vectorTiles={},this._overriddenStyles={},this.on("tileunload",function(t){delete this._vectorTiles[this._tileCoordsToKey(t.coords)]},this))},createTile:function(t,e){var i=this.options.getFeatureId,r=this.getTileSize(),n=this.options.rendererFactory(t,r,this.options),o=this._getVectorTilePromise(t);return i&&(this._vectorTiles[this._tileCoordsToKey(t)]=n,n._features={}),o.then(function(r){var o=this;for(var a in r.layers){var s=r.layers[a],u=o.getTileSize().x/s.extent,h=o.options.vectorTileLayerStyles[a]||L.Path.prototype.options;for(var c in s.features){var l,f=s.features[c],d=h;if(i){l=o.options.getFeatureId(f);var p=o._overriddenStyles[l];p&&(d=p[a]?p[a]:p)}if(d instanceof Function&&(d=d(f.properties,t.z)),d instanceof Array||(d=[d]),d.length){var y=o._createLayer(f,u);for(var v in d){var g=L.extend({},L.Path.prototype.options,d[v]);y.render(n,g),n._addPath(y)}o.options.interactive&&y.makeInteractive(),i&&(n._features[l]={layerName:a,feature:y})}}}null!=this._map&&n.addTo(this._map),L.Util.requestAnimFrame(e.bind(t,null,null))}.bind(this)),n.getContainer()},setFeatureStyle:function(t,e){var i=this;this._overriddenStyles[t]={};for(var r in this._vectorTiles){var n=i._vectorTiles[r],o=n._features,a=o[t];if(a){i._overriddenStyles[t]=e;var s=a.feature,u=e;e[a.layerName]&&(u=e[a.layerName]),u=u instanceof Function?u(s.properties,n.getCoord().z):u,i._updateStyles(s,n,u)}else i._overriddenStyles[t]=e}},resetFeatureStyle:function(t){var e=this;delete this._overriddenStyles[t];for(var i in this._vectorTiles){var r=e._vectorTiles[i],n=r._features,o=n[t];if(o){var a=o.feature,s=e.options.vectorTileLayerStyles[o.layerName]||L.Path.prototype.options,u=s instanceof Function?s(a.properties,r.getCoord().z):s;e._updateStyles(a,r,u)}}},_updateStyles:function(t,e,i){i instanceof Array||(i=[i]);for(var r in i){var n=L.extend({},L.Path.prototype.options,i[r]);t.updateStyle(e,n)}},_createLayer:function(t,e,i){var r;switch(t.type){case 1:r=new PointLayer(t,e);break;case 2:r=new PolylineLayer(t,e);break;case 3:r=new PolygonLayer(t,e)}return this.options.interactive&&r.addEventParent(this),r}}),L.vectorGrid=function(t){return new L.VectorGrid(t)};var FeatureLayer=L.Class.extend({render:function(t,e){this._renderer=t,this.options=e,t._initPath(this),t._updateStyle(this)},updateStyle:function(t,e){this.options=e,t._updateStyle(this)},_getPixelBounds:function(){for(var t=this._parts,e=L.bounds([]),i=0;i<t.length;i++)for(var r=t[i],n=0;n<r.length;n++)e.extend(r[n]);var o=this._clickTolerance(),a=new L.Point(o,o);return e.min._subtract(a),e.max._add(a),e},_clickTolerance:L.Path.prototype._clickTolerance}),PointLayer=L.CircleMarker.extend({includes:FeatureLayer.prototype,statics:{iconCache:{}},initialize:function(t,e){this.properties=t.properties,this._makeFeatureParts(t,e)},render:function(t,e){FeatureLayer.prototype.render.call(this,t,e),this._radius=e.radius,this._updatePath()},_makeFeatureParts:function(t,e){var i=t.geometry[0][0];"x"in i&&(this._point=L.point(i.x*e,i.y*e),this._empty=L.Util.falseFn)},makeInteractive:function(){this._updateBounds()},updateStyle:function(t,e){return this._radius=e.radius||this._radius,this._updateBounds(),FeatureLayer.prototype.updateStyle.call(this,t,e)},_updateBounds:function(){var t=this.options.icon;if(t){var e=L.point(t.options.iconSize),i=t.options.iconAnchor||e&&e.divideBy(2,!0),r=this._point.subtract(i);this._pxBounds=new L.Bounds(r,r.add(t.options.iconSize))}else L.CircleMarker.prototype._updateBounds.call(this)},_updatePath:function(){this.options.icon?this._renderer._updateIcon(this):L.CircleMarker.prototype._updatePath.call(this)},_getImage:function(){if(this.options.icon){var t=this.options.icon.options.iconUrl,e=PointLayer.iconCache[t];if(!e){var i=this.options.icon;e=PointLayer.iconCache[t]=i.createIcon()}return e}return null},_containsPoint:function(t){var e=this.options.icon;return e?this._pxBounds.contains(t):L.CircleMarker.prototype._containsPoint.call(this,t)}}),polyBase={_makeFeatureParts:function(t,e){var i,r=this,n=t.geometry;this._parts=[];for(var o in n){var a=n[o],s=[];for(var u in a)i=a[u],"x"in i?s.push(L.point(i.x*e,i.y*e)):s.push(L.point(i[0]*e,i[1]*e));r._parts.push(s)}},makeInteractive:function(){this._pxBounds=this._getPixelBounds()}},PolylineLayer=L.Polyline.extend({includes:[FeatureLayer.prototype,polyBase],initialize:function(t,e){this.properties=t.properties,this._makeFeatureParts(t,e)},render:function(t,e){e.fill=!1,FeatureLayer.prototype.render.call(this,t,e),this._updatePath()},updateStyle:function(t,e){e.fill=!1,FeatureLayer.prototype.updateStyle.call(this,t,e)}}),PolygonLayer=L.Polygon.extend({includes:[FeatureLayer.prototype,polyBase],initialize:function(t,e){this.properties=t.properties,this._makeFeatureParts(t,e)},render:function(t,e){FeatureLayer.prototype.render.call(this,t,e),this._updatePath()}});L.VectorGrid.Protobuf=L.VectorGrid.extend({
options:{subdomains:"abc"},initialize:function(t,e){this._url=t,L.VectorGrid.prototype.initialize.call(this,e)},_getSubdomain:L.TileLayer.prototype._getSubdomain,_getVectorTilePromise:function(t){var e={s:this._getSubdomain(t),x:t.x,y:t.y,z:t.z};if(this._map&&!this._map.options.crs.infinite){var i=this._globalTileRange.max.y-t.y;this.options.tms&&(e.y=i),e["-y"]=i}var r=L.Util.template(this._url,L.extend(e,this.options));return fetch(r).then(function(t){return t.ok?t.blob().then(function(t){var e=new FileReader;return new Promise(function(i){e.addEventListener("loadend",function(){var t=new index(e.result);return i(new VectorTile(t))}),e.readAsArrayBuffer(t)})}):{layers:[]}}).then(function(t){for(var e in t.layers){for(var i=[],r=0;r<t.layers[e].length;r++){var n=t.layers[e].feature(r);n.geometry=n.loadGeometry(),i.push(n)}t.layers[e].features=i}return t})}}),L.vectorGrid.protobuf=function(t,e){return new L.VectorGrid.Protobuf(t,e)};var simplify_1=simplify$1,feature=createFeature$1,convert_1=convert$1,simplify=simplify_1,createFeature=feature,tile=transformTile,point=transformPoint,transform$1={tile:tile,point:point},clip_1=clip$1,createFeature$2=feature,clip$2=clip_1,createFeature$3=feature,wrap_1=wrap$1,tile$1=createTile$1,index$7=geojsonvt,convert=convert_1,transform=transform$1,clip=clip_1,wrap=wrap_1,createTile=tile$1;GeoJSONVT.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,solidChildren:!1,tolerance:3,extent:4096,buffer:64,debug:0},GeoJSONVT.prototype.splitTile=function(t,e,i,r,n,o,a){for(var s=this,u=[t,e,i,r],h=this.options,c=h.debug,l=null;u.length;){r=u.pop(),i=u.pop(),e=u.pop(),t=u.pop();var f=1<<e,d=toID(e,i,r),p=s.tiles[d],y=e===h.maxZoom?0:h.tolerance/(f*h.extent);if(!p&&(c>1&&console.time("creation"),p=s.tiles[d]=createTile(t,f,i,r,y,e===h.maxZoom),s.tileCoords.push({z:e,x:i,y:r}),c)){c>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",e,i,r,p.numFeatures,p.numPoints,p.numSimplified),console.timeEnd("creation"));var v="z"+e;s.stats[v]=(s.stats[v]||0)+1,s.total++}if(p.source=t,n){if(e===h.maxZoom||e===n)continue;var g=1<<n-e;if(i!==Math.floor(o/g)||r!==Math.floor(a/g))continue}else if(e===h.indexMaxZoom||p.numPoints<=h.indexMaxPoints)continue;if(h.solidChildren||!isClippedSquare(p,h.extent,h.buffer)){p.source=null,c>1&&console.time("clipping");var m,_,x,w,b,F,P=.5*h.buffer/h.extent,S=.5-P,L=.5+P,V=1+P;m=_=x=w=null,b=clip(t,f,i-P,i+L,0,intersectX,p.min[0],p.max[0]),F=clip(t,f,i+S,i+V,0,intersectX,p.min[0],p.max[0]),b&&(m=clip(b,f,r-P,r+L,1,intersectY,p.min[1],p.max[1]),_=clip(b,f,r+S,r+V,1,intersectY,p.min[1],p.max[1])),F&&(x=clip(F,f,r-P,r+L,1,intersectY,p.min[1],p.max[1]),w=clip(F,f,r+S,r+V,1,intersectY,p.min[1],p.max[1])),c>1&&console.timeEnd("clipping"),t.length&&(u.push(m||[],e+1,2*i,2*r),u.push(_||[],e+1,2*i,2*r+1),u.push(x||[],e+1,2*i+1,2*r),u.push(w||[],e+1,2*i+1,2*r+1))}else n&&(l=e)}return l},GeoJSONVT.prototype.getTile=function(t,e,i){var r=this,n=this.options,o=n.extent,a=n.debug,s=1<<t;e=(e%s+s)%s;var u=toID(t,e,i);if(this.tiles[u])return transform.tile(this.tiles[u],o);a>1&&console.log("drilling down to z%d-%d-%d",t,e,i);for(var h,c=t,l=e,f=i;!h&&c>0;)c--,l=Math.floor(l/2),f=Math.floor(f/2),h=r.tiles[toID(c,l,f)];if(!h||!h.source)return null;if(a>1&&console.log("found parent tile z%d-%d-%d",c,l,f),isClippedSquare(h,o,n.buffer))return transform.tile(h,o);a>1&&console.time("drilling down");var d=this.splitTile(h.source,c,l,f,t,e,i);if(a>1&&console.timeEnd("drilling down"),null!==d){var p=1<<t-d;u=toID(d,Math.floor(e/p),Math.floor(i/p))}return this.tiles[u]?transform.tile(this.tiles[u],o):null};var identity=function(t){return t},transform$3=function(t){if(null==(e=t.transform))return identity;var e,i,r,n=e.scale[0],o=e.scale[1],a=e.translate[0],s=e.translate[1];return function(t,e){return e||(i=r=0),t[0]=(i+=t[0])*n+a,t[1]=(r+=t[1])*o+s,t}},bbox=function(t){function e(t){s[0]=t[0],s[1]=t[1],a(s),s[0]<u&&(u=s[0]),s[0]>c&&(c=s[0]),s[1]<h&&(h=s[1]),s[1]>l&&(l=s[1])}function i(t){switch(t.type){case"GeometryCollection":t.geometries.forEach(i);break;case"Point":e(t.coordinates);break;case"MultiPoint":t.coordinates.forEach(e)}}var r=t.bbox;if(!r){var n,o,a=transform$3(t),s=new Array(2),u=1/0,h=u,c=-u,l=-u;t.arcs.forEach(function(t){for(var e=-1,i=t.length;++e<i;)n=t[e],s[0]=n[0],s[1]=n[1],a(s,e),s[0]<u&&(u=s[0]),s[0]>c&&(c=s[0]),s[1]<h&&(h=s[1]),s[1]>l&&(l=s[1])});for(o in t.objects)i(t.objects[o]);r=t.bbox=[u,h,c,l]}return r},reverse=function(t,e){for(var i,r=t.length,n=r-e;n<--r;)i=t[n],t[n++]=t[r],t[r]=i},feature$2=function(t,e){return"GeometryCollection"===e.type?{type:"FeatureCollection",features:e.geometries.map(function(e){return feature$3(t,e)})}:feature$3(t,e)},stitch=function(t,e){function i(e){var i,r=t.arcs[e<0?~e:e],n=r[0];return t.transform?(i=[0,0],r.forEach(function(t){i[0]+=t[0],i[1]+=t[1]})):i=r[r.length-1],e<0?[i,n]:[n,i]}function r(t,e){for(var i in t){var r=t[i];delete e[r.start],delete r.start,delete r.end,r.forEach(function(t){n[t<0?~t:t]=1}),s.push(r)}}var n={},o={},a={},s=[],u=-1;return e.forEach(function(i,r){var n,o=t.arcs[i<0?~i:i];o.length<3&&!o[1][0]&&!o[1][1]&&(n=e[++u],e[u]=i,e[r]=n)}),e.forEach(function(t){var e,r,n=i(t),s=n[0],u=n[1];if(e=a[s])if(delete a[e.end],e.push(t),e.end=u,r=o[u]){delete o[r.start];var h=r===e?e:e.concat(r);o[h.start=e.start]=a[h.end=r.end]=h}else o[e.start]=a[e.end]=e;else if(e=o[u])if(delete o[e.start],e.unshift(t),e.start=s,r=a[s]){delete a[r.end];var c=r===e?e:r.concat(e);o[c.start=r.start]=a[c.end=e.end]=c}else o[e.start]=a[e.end]=e;else e=[t],o[e.start=s]=a[e.end=u]=e}),r(a,o),r(o,a),e.forEach(function(t){n[t<0?~t:t]||s.push([t])}),s},bisect=function(t,e){for(var i=0,r=t.length;i<r;){var n=i+r>>>1;t[n]<e?i=n+1:r=n}return i};L.VectorGrid.Slicer=L.VectorGrid.extend({options:{vectorTileLayerName:"sliced",extent:4096,maxZoom:14},cachedOptions:{},slicers:{},initialize:function(t,e){var i=this;L.VectorGrid.prototype.initialize.call(this,e);for(var r in this.options)"rendererFactory"!==r&&"vectorTileLayerStyles"!==r&&"function"!=typeof i.options[r]&&(i.cachedOptions[r]=i.options[r]);if(t.type&&"Topology"===t.type)for(var n in t.objects)i.slicers[n]=index$7(feature$2(t,t.objects[n]),e);else this.slicers[e.vectorTileLayerName]=index$7(t,e)},_getVectorTilePromise:function(t){var e=this,i=new Promise(function(i){var r={};for(var n in e.slicers){var o=e.slicers[n].getTile(t.z,t.x,t.y);if(o){var a={features:[],extent:e.cachedOptions.extent,name:e.cachedOptions.vectorTileLayerName,length:o.features.length};for(var s in o.features){var u={geometry:o.features[s].geometry,properties:o.features[s].tags,type:o.features[s].type};a.features.push(u)}r[n]=a}}var h={layers:r,coords:t};i(h)});return i}}),L.vectorGrid.slicer=function(t,e){return new L.VectorGrid.Slicer(t,e)},L.Canvas.Tile=L.Canvas.extend({initialize:function(t,e,i){L.Canvas.prototype.initialize.call(this,i),this._tileCoord=t,this._size=e,this._initContainer(),this._container.setAttribute("width",this._size.x),this._container.setAttribute("height",this._size.y),this._layers={},this._drawnLayers={},this._drawing=!0,i.interactive&&(this._container.style.pointerEvents="auto")},getCoord:function(){return this._tileCoord},getContainer:function(){return this._container},getOffset:function(){return this._tileCoord.scaleBy(this._size).subtract(this._map.getPixelOrigin())},onAdd:L.Util.falseFn,addTo:function(t){this._map=t},_onClick:function(t){var e,i=this,r=this._map.mouseEventToLayerPoint(t).subtract(this.getOffset()),n=[];for(var o in this._layers)e=i._layers[o],e.options.interactive&&e._containsPoint(r)&&!i._map._draggableMoved(e)&&(L.DomEvent._fakeStop(t),n.push(e));n.length&&this._fireEvent(n,t)},_onMouseMove:function(t){if(this._map&&!this._map.dragging.moving()&&!this._map._animatingZoom){var e=this._map.mouseEventToLayerPoint(t).subtract(this.getOffset());this._handleMouseOut(t,e),this._handleMouseHover(t,e)}},_updateIcon:function(t){if(this._drawing){var e=t.options.icon,i=e.options,r=L.point(i.iconSize),n=i.iconAnchor||r&&r.divideBy(2,!0),o=t._point.subtract(n),a=this._ctx,s=t._getImage();s.complete?a.drawImage(s,o.x,o.y,r.x,r.y):L.DomEvent.on(s,"load",function(){a.drawImage(s,o.x,o.y,r.x,r.y)}),this._drawnLayers[t._leaflet_id]=t}}}),L.canvas.tile=function(t,e,i){return new L.Canvas.Tile(t,e,i)};
